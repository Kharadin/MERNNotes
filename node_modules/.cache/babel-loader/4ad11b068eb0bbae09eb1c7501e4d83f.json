{"ast":null,"code":"import _objectSpread from\"/Users/dimetrius/Documents/ReactCrashCourse/mynotes/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/dimetrius/Documents/ReactCrashCourse/mynotes/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/dimetrius/Documents/ReactCrashCourse/mynotes/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/dimetrius/Documents/ReactCrashCourse/mynotes/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';// import notes from '../assets/data';\nimport{Link}from'react-router-dom';import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(_ref){var history=_ref.history;// let {id} = useParams();\nvar noteId=useParams().id;var navigate=useNavigate();// useParams() Returns an object of key/value pairs of the dynamic params from the current URL that were matched by the route path.\n//console.log(props);\n//console.log(useParams);\nconsole.log(noteId);// let note = notes.find(note => note.id === Number(noteId));\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];// useState should be set at the top level of the component and never inside the useEffect\nuseEffect(function(){getNote();},[]);// was [noteId]\nvar getNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(noteId==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"http://localhost:8000/notes/\".concat(noteId));case 4:response=_context.sent;console.log(response);_context.next=8;return response.json();case 8:data=_context.sent;console.log('data from response: ',data);setNote(data);case 11:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref2.apply(this,arguments);};}();// console.log(note)\nvar createNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:8000/notes/\",{method:'POST',headers:{'Content-type':'application/json'},body:JSON.stringify(_objectSpread(_objectSpread({},note),{},{'updated':new Date()}))});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function createNote(){return _ref3.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"http://localhost:8000/notes/\".concat(noteId),{method:'PUT',headers:{'Content-type':'application/json'},body:JSON.stringify(_objectSpread(_objectSpread({},note),{},{'updated':new Date()}))});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function updateNote(){return _ref4.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(\"http://localhost:8000/notes/\".concat(noteId),{method:'DELETE',headers:{'Content-type':'application/json'},body:JSON.stringify(note)});case 2:// e.preventDefault()\nnavigate('/');case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteNote(_x){return _ref5.apply(this,arguments);};}();var handleSubmit=function handleSubmit(e){e.preventDefault();console.log(\"handlesubmit fired\");//console.log ('id and body:', noteId, note.body)\nif(noteId==='new'&&note==null){navigate('/');return;}else if(noteId==='new'&&note.body!==null){createNote();console.log('create');}else if(noteId!=='new'&&note.body===''){deleteNote();console.log('delete');}else if(noteId!=='new'&&note.body!==null){updateNote();console.log('update');}console.log('out of ifs');navigate(\"/\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(Link,{to:\"\",children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})})}),noteId!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{value:note===null||note===void 0?void 0:note.body,onChange:function onChange(e){return setNote(_objectSpread(_objectSpread({},note),{},{'body':e.target.value}));}})]});};export default NotePage;","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","ReactComponent","ArrowLeft","useNavigate","NotePage","history","noteId","id","navigate","console","log","note","setNote","getNote","fetch","response","json","data","createNote","method","headers","body","JSON","stringify","Date","updateNote","deleteNote","e","handleSubmit","preventDefault","target","value"],"sources":["/Users/dimetrius/Documents/ReactCrashCourse/mynotes/src/pages/NotePage.js"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport { useParams } from 'react-router-dom';\n// import notes from '../assets/data';\nimport { Link } from 'react-router-dom';\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg'\n\nimport { useNavigate} from \"react-router-dom\"\n\n\nconst NotePage = ({history}) => {\n  // let {id} = useParams();\n \n\n  let noteId= useParams().id;\n  \n  const navigate = useNavigate()\n\n  // useParams() Returns an object of key/value pairs of the dynamic params from the current URL that were matched by the route path.\n  //console.log(props);\n  //console.log(useParams);\n   console.log(noteId);\n\n  \n  // let note = notes.find(note => note.id === Number(noteId));\n  \n  let [note, setNote] = useState (null)\n  // useState should be set at the top level of the component and never inside the useEffect\n\n   useEffect(() => {\n    getNote()\n     }, [])\n     // was [noteId]\n\n    \n    let getNote = async () => {\n      if (noteId === 'new') return\n      let response = await fetch (`http://localhost:8000/notes/${noteId}`)\n      console.log(response)\n      let data =  await response.json()\n      console.log('data from response: ', data)\n       setNote(data)\n      \n    }\n    \n // console.log(note)\n\n  let createNote = async () => {\n    await fetch(`http://localhost:8000/notes/`, {\n      method: 'POST',\n      headers: {\n           'Content-type': 'application/json'\n      },\n      body: JSON.stringify({...note, 'updated': new Date()})\n\n    })\n}\n\n   let updateNote = async () => {\n       await fetch(`http://localhost:8000/notes/${noteId}`, {\n         method: 'PUT',\n         headers: {\n              'Content-type': 'application/json'\n         },\n         body: JSON.stringify({...note, 'updated': new Date()})\n\n       })\n   }\n\n   let deleteNote = async (e) => {\n        await fetch(`http://localhost:8000/notes/${noteId}`, {\n          method: 'DELETE',\n          headers: {\n              'Content-type': 'application/json'\n          },\n          body: JSON.stringify(note)\n\n        })\n        // e.preventDefault()\n        navigate('/')\n   }\n\n   let handleSubmit = (e) => {\n    e.preventDefault()\n     console.log(\"handlesubmit fired\")\n     //console.log ('id and body:', noteId, note.body)\n\n     if (noteId ==='new' && note == null) {\n       navigate('/')\n       return\n     } else if \n      (noteId === 'new' && note.body !==null){\n       createNote();\n       console.log('create')\n\n      } else if (noteId !== 'new' && note.body === ''){\n        deleteNote ();\n        console.log('delete')\n      } \n      else if (noteId !== 'new' && note.body !==null) {\n        updateNote();\n        console.log('update')\n      }    \n      \n      console.log('out of ifs')\n       navigate(\"/\")\n   }\n\n  return (\n    <div className='note'>\n\n      <div className='note-header'>\n         <h3>\n            <Link to=\"\">\n              <ArrowLeft onClick={handleSubmit}/>\n            </Link>\n\n         </h3>\n          {noteId !=='new' ? (\n                <button onClick= {deleteNote}>Delete</button>\n          ): ( \n                <button onClick ={handleSubmit}>Done</button>\n          )}\n\n      </div>\n      <textarea value= {note?.body} onChange ={(e) => setNote({...note, 'body':e.target.value})}   >\n      {/* // if there is... */}\n        </textarea>\n    </div>\n  )\n}\n\nexport default NotePage\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}