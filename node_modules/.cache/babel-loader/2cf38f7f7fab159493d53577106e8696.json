{"ast":null,"code":"var _jsxFileName = \"/Users/dimetrius/Documents/ReactCrashCourse/mynotesMongo/client/src/pages/NotePage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom'; // import notes from '../assets/data';\n\nimport { Link } from 'react-router-dom';\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg';\nimport { useNavigate } from \"react-router-dom\";\nimport Axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst NotePage = _ref => {\n  _s();\n\n  let {\n    history\n  } = _ref;\n  // let {id} = useParams();\n  let noteId = useParams().id;\n  const navigate = useNavigate(); // useParams() Returns an object of key/value pairs of the dynamic params from the current URL that were matched by the route path.\n  //console.log(props);\n  //console.log(useParams);\n\n  console.log('NoteId: ', noteId); // let note = notes.find(note => note.id === Number(noteId));\n\n  let [note, setNote] = useState(null); // useState should be set at the top level of the component and never inside the useEffect\n\n  useEffect(() => {\n    getNote();\n  }, []); // was [noteId]\n\n  let getNote = async () => {\n    if (noteId === 'new') return;\n    let response = await Axios.get('http://localhost:3001/getNote', {\n      params: {\n        product: this.product\n      }\n    });\n    let data = await response.data;\n    setNote(data);\n    console.log('data:', data);\n  }; // let getNote = async () => {\n  //   if (noteId === 'new') return\n  //   let response = await fetch (`http://localhost:8000/notes/${noteId}`)\n  //   console.log(response)\n  //   let data =  await response.json()\n  //   console.log('data from response: ', data)\n  //    setNote(data)\n  // }\n  // console.log(note)\n\n\n  let createNote = async () => {\n    await fetch(`http://localhost:8000/notes/`, {\n      method: 'POST',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify({ ...note,\n        'updated': new Date()\n      })\n    });\n  };\n\n  let updateNote = async () => {\n    await fetch(`http://localhost:8000/notes/${noteId}`, {\n      method: 'PUT',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify({ ...note,\n        'updated': new Date()\n      })\n    });\n  };\n\n  let deleteNote = async e => {\n    await fetch(`http://localhost:8000/notes/${noteId}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(note)\n    }); // e.preventDefault()\n\n    navigate('/');\n  };\n\n  let handleSubmit = e => {\n    e.preventDefault();\n    console.log(\"handlesubmit fired\"); //console.log ('id and body:', noteId, note.body)\n\n    if (noteId === 'new' && note == null) {\n      navigate('/');\n      return;\n    } else if (noteId === 'new' && note.body !== null) {\n      createNote();\n      console.log('create');\n    } else if (noteId !== 'new' && note.body === '') {\n      deleteNote();\n      console.log('delete');\n    } else if (noteId !== 'new' && note.body !== null) {\n      updateNote();\n      console.log('update');\n    }\n\n    console.log('out of ifs');\n    navigate(\"/\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"note\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"note-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"\",\n          children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n            onClick: handleSubmit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 10\n      }, this), noteId !== 'new' ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: deleteNote,\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        children: \"Done\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      value: note === null || note === void 0 ? void 0 : note.body,\n      onChange: e => setNote({ ...note,\n        'body': e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n};\n\n_s(NotePage, \"xRslRYhbEpa7IMJ6ZKrs1A6SmbI=\", false, function () {\n  return [useParams, useNavigate];\n});\n\n_c = NotePage;\nexport default NotePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"NotePage\");","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","ReactComponent","ArrowLeft","useNavigate","Axios","NotePage","history","noteId","id","navigate","console","log","note","setNote","getNote","response","get","params","product","data","createNote","fetch","method","headers","body","JSON","stringify","Date","updateNote","deleteNote","e","handleSubmit","preventDefault","target","value"],"sources":["/Users/dimetrius/Documents/ReactCrashCourse/mynotesMongo/client/src/pages/NotePage.js"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport { useParams } from 'react-router-dom';\n// import notes from '../assets/data';\nimport { Link } from 'react-router-dom';\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg'\nimport { useNavigate} from \"react-router-dom\"\nimport Axios from \"axios\"\n\nconst NotePage = ({history}) => {\n  // let {id} = useParams();\n \n\n  let noteId= useParams().id;\n  \n  const navigate = useNavigate()\n\n  // useParams() Returns an object of key/value pairs of the dynamic params from the current URL that were matched by the route path.\n  //console.log(props);\n  //console.log(useParams);\n   console.log('NoteId: ', noteId);\n\n  \n  // let note = notes.find(note => note.id === Number(noteId));\n  \n  let [note, setNote] = useState (null)\n  // useState should be set at the top level of the component and never inside the useEffect\n\n   useEffect(() => {\n    getNote()\n     }, [])\n     // was [noteId]\n\n        \n\n     let getNote = async () => {\n      if (noteId === 'new') return\n      let response = await Axios.get('http://localhost:3001/getNote', \n      { params: { product: this.product } })\n      let data = await response.data\n      setNote(data);\n      console.log('data:', data)\n  }\n\n    // let getNote = async () => {\n    //   if (noteId === 'new') return\n    //   let response = await fetch (`http://localhost:8000/notes/${noteId}`)\n    //   console.log(response)\n    //   let data =  await response.json()\n    //   console.log('data from response: ', data)\n    //    setNote(data)\n      \n    // }\n    \n // console.log(note)\n\n  let createNote = async () => {\n    await fetch(`http://localhost:8000/notes/`, {\n      method: 'POST',\n      headers: {\n           'Content-type': 'application/json'\n      },\n      body: JSON.stringify({...note, 'updated': new Date()})\n\n    })\n}\n\n   let updateNote = async () => {\n       await fetch(`http://localhost:8000/notes/${noteId}`, {\n         method: 'PUT',\n         headers: {\n              'Content-type': 'application/json'\n         },\n         body: JSON.stringify({...note, 'updated': new Date()})\n\n       })\n   }\n\n   let deleteNote = async (e) => {\n        await fetch(`http://localhost:8000/notes/${noteId}`, {\n          method: 'DELETE',\n          headers: {\n              'Content-type': 'application/json'\n          },\n          body: JSON.stringify(note)\n\n        })\n        // e.preventDefault()\n        navigate('/')\n   }\n\n   let handleSubmit = (e) => {\n    e.preventDefault()\n     console.log(\"handlesubmit fired\")\n     //console.log ('id and body:', noteId, note.body)\n\n     if (noteId ==='new' && note == null) {\n       navigate('/')\n       return\n     } else if \n      (noteId === 'new' && note.body !==null){\n       createNote();\n       console.log('create')\n\n      } else if (noteId !== 'new' && note.body === ''){\n        deleteNote ();\n        console.log('delete')\n      } \n      else if (noteId !== 'new' && note.body !==null) {\n        updateNote();\n        console.log('update')\n      }    \n      \n      console.log('out of ifs')\n       navigate(\"/\")\n   }\n\n  return (\n    <div className='note'>\n\n      <div className='note-header'>\n         <h3>\n            <Link to=\"\">\n              <ArrowLeft onClick={handleSubmit}/>\n            </Link>\n\n         </h3>\n          {noteId !=='new' ? (\n                <button onClick= {deleteNote}>Delete</button>\n          ): ( \n                <button onClick ={handleSubmit}>Done</button>\n          )}\n\n      </div>\n      <textarea value= {note?.body} onChange ={(e) => setNote({...note, 'body':e.target.value})}   >\n      {/* // if there is... */}\n        </textarea>\n    </div>\n  )\n}\n\nexport default NotePage\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}